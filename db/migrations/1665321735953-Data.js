module.exports = class Data1665321735953 {
  name = 'Data1665321735953'

  async up(db) {
    await db.query(`CREATE TABLE "metadata" ("id" character varying NOT NULL, "name" text, "description" text, "image" text, "external_url" text, "attributes" jsonb, "type" text, "composite" boolean, "layers" text array, "artist" text, "artist_url" text, CONSTRAINT "PK_56b22355e89941b9792c04ab176" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_86eb50b34115e79dec4f778f00" ON "metadata" ("name") `)
    await db.query(`CREATE INDEX "IDX_d80eccd02959378140f86342f1" ON "metadata" ("type") `)
    await db.query(`CREATE INDEX "IDX_08284c06a171c6c4719d95b881" ON "metadata" ("artist") `)
    await db.query(`CREATE TABLE "erc721_owner" ("id" character varying NOT NULL, "balance" numeric NOT NULL, CONSTRAINT "PK_dbaf6e78c699f2449b9d0bf1520" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_f86c52f1003cc2ee38bf3cc47a" ON "erc721_owner" ("balance") `)
    await db.query(`CREATE TABLE "erc721_transfer" ("id" character varying NOT NULL, "token_id" character varying NOT NULL, "from_id" character varying NOT NULL, "to_id" character varying NOT NULL, "timestamp" numeric NOT NULL, "block" numeric NOT NULL, "transaction_hash" text NOT NULL, CONSTRAINT "PK_972b8de69f0dc0e83d55d39c2f5" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_a127f62ad75779f26b776c4945" ON "erc721_transfer" ("token_id") `)
    await db.query(`CREATE INDEX "IDX_15e3b36d18f898ba157af7b98e" ON "erc721_transfer" ("from_id") `)
    await db.query(`CREATE INDEX "IDX_dc17e48f343dfda008975c6393" ON "erc721_transfer" ("to_id") `)
    await db.query(`CREATE INDEX "IDX_eccad602965a1e6ac6125a6a98" ON "erc721_transfer" ("timestamp") `)
    await db.query(`CREATE INDEX "IDX_c875d7b7bce5e0f1fd27966eee" ON "erc721_transfer" ("block") `)
    await db.query(`CREATE INDEX "IDX_4b006886133830719cf783d39e" ON "erc721_transfer" ("transaction_hash") `)
    await db.query(`CREATE TABLE "erc721_contract" ("id" character varying NOT NULL, "name" text, "symbol" text, "total_supply" numeric NOT NULL, "contract_uri" text, "address" text, "contract_uri_updated" numeric, "decimals" integer, "start_block" integer NOT NULL, "metadata_name" text, "description" text, "image" text, "external_link" text, "artist" text, "artist_url" text, CONSTRAINT "PK_5ac5a33bb1d74ded4bc74a3661c" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_6501d2a444d490fadefc6e253d" ON "erc721_contract" ("name") `)
    await db.query(`CREATE INDEX "IDX_23b93ea57b842b3e653f2bcb95" ON "erc721_contract" ("symbol") `)
    await db.query(`CREATE INDEX "IDX_858775bde12dc639d0f463ccbb" ON "erc721_contract" ("contract_uri_updated") `)
    await db.query(`CREATE INDEX "IDX_be9af09e9a3bd119256d1f00ab" ON "erc721_contract" ("start_block") `)
    await db.query(`CREATE INDEX "IDX_e6c54febe8ec39f1cd6a5c5f45" ON "erc721_contract" ("metadata_name") `)
    await db.query(`CREATE INDEX "IDX_ebe14ec419e71c4aa399db1749" ON "erc721_contract" ("artist") `)
    await db.query(`CREATE TABLE "erc721_token" ("id" character varying NOT NULL, "numeric_id" numeric NOT NULL, "owner_id" character varying NOT NULL, "token_uri" text, "updated_at" numeric NOT NULL, "created_at" numeric NOT NULL, "contract_id" character varying NOT NULL, "metadata_id" character varying, CONSTRAINT "PK_d621a67a63a7afeeac11533cd2e" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_a6de81dc0c14f5b6870b3dc0f3" ON "erc721_token" ("numeric_id") `)
    await db.query(`CREATE INDEX "IDX_2b5437007e048eccbeb8222235" ON "erc721_token" ("owner_id") `)
    await db.query(`CREATE INDEX "IDX_ba2be3d52aac2c4b2619036c0a" ON "erc721_token" ("updated_at") `)
    await db.query(`CREATE INDEX "IDX_831c0b42bd0723cf94e3c937da" ON "erc721_token" ("created_at") `)
    await db.query(`CREATE INDEX "IDX_7e22f37f2ee0280f3bf548ad98" ON "erc721_token" ("contract_id") `)
    await db.query(`CREATE INDEX "IDX_f53d5b468ed6b40e8ad41343de" ON "erc721_token" ("metadata_id") `)
    await db.query(`ALTER TABLE "erc721_transfer" ADD CONSTRAINT "FK_a127f62ad75779f26b776c4945b" FOREIGN KEY ("token_id") REFERENCES "erc721_token"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "erc721_transfer" ADD CONSTRAINT "FK_15e3b36d18f898ba157af7b98ee" FOREIGN KEY ("from_id") REFERENCES "erc721_owner"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "erc721_transfer" ADD CONSTRAINT "FK_dc17e48f343dfda008975c63935" FOREIGN KEY ("to_id") REFERENCES "erc721_owner"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "erc721_token" ADD CONSTRAINT "FK_2b5437007e048eccbeb82222357" FOREIGN KEY ("owner_id") REFERENCES "erc721_owner"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "erc721_token" ADD CONSTRAINT "FK_7e22f37f2ee0280f3bf548ad981" FOREIGN KEY ("contract_id") REFERENCES "erc721_contract"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "erc721_token" ADD CONSTRAINT "FK_f53d5b468ed6b40e8ad41343de3" FOREIGN KEY ("metadata_id") REFERENCES "metadata"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
  }

  async down(db) {
    await db.query(`DROP TABLE "metadata"`)
    await db.query(`DROP INDEX "public"."IDX_86eb50b34115e79dec4f778f00"`)
    await db.query(`DROP INDEX "public"."IDX_d80eccd02959378140f86342f1"`)
    await db.query(`DROP INDEX "public"."IDX_08284c06a171c6c4719d95b881"`)
    await db.query(`DROP TABLE "erc721_owner"`)
    await db.query(`DROP INDEX "public"."IDX_f86c52f1003cc2ee38bf3cc47a"`)
    await db.query(`DROP TABLE "erc721_transfer"`)
    await db.query(`DROP INDEX "public"."IDX_a127f62ad75779f26b776c4945"`)
    await db.query(`DROP INDEX "public"."IDX_15e3b36d18f898ba157af7b98e"`)
    await db.query(`DROP INDEX "public"."IDX_dc17e48f343dfda008975c6393"`)
    await db.query(`DROP INDEX "public"."IDX_eccad602965a1e6ac6125a6a98"`)
    await db.query(`DROP INDEX "public"."IDX_c875d7b7bce5e0f1fd27966eee"`)
    await db.query(`DROP INDEX "public"."IDX_4b006886133830719cf783d39e"`)
    await db.query(`DROP TABLE "erc721_contract"`)
    await db.query(`DROP INDEX "public"."IDX_6501d2a444d490fadefc6e253d"`)
    await db.query(`DROP INDEX "public"."IDX_23b93ea57b842b3e653f2bcb95"`)
    await db.query(`DROP INDEX "public"."IDX_858775bde12dc639d0f463ccbb"`)
    await db.query(`DROP INDEX "public"."IDX_be9af09e9a3bd119256d1f00ab"`)
    await db.query(`DROP INDEX "public"."IDX_e6c54febe8ec39f1cd6a5c5f45"`)
    await db.query(`DROP INDEX "public"."IDX_ebe14ec419e71c4aa399db1749"`)
    await db.query(`DROP TABLE "erc721_token"`)
    await db.query(`DROP INDEX "public"."IDX_a6de81dc0c14f5b6870b3dc0f3"`)
    await db.query(`DROP INDEX "public"."IDX_2b5437007e048eccbeb8222235"`)
    await db.query(`DROP INDEX "public"."IDX_ba2be3d52aac2c4b2619036c0a"`)
    await db.query(`DROP INDEX "public"."IDX_831c0b42bd0723cf94e3c937da"`)
    await db.query(`DROP INDEX "public"."IDX_7e22f37f2ee0280f3bf548ad98"`)
    await db.query(`DROP INDEX "public"."IDX_f53d5b468ed6b40e8ad41343de"`)
    await db.query(`ALTER TABLE "erc721_transfer" DROP CONSTRAINT "FK_a127f62ad75779f26b776c4945b"`)
    await db.query(`ALTER TABLE "erc721_transfer" DROP CONSTRAINT "FK_15e3b36d18f898ba157af7b98ee"`)
    await db.query(`ALTER TABLE "erc721_transfer" DROP CONSTRAINT "FK_dc17e48f343dfda008975c63935"`)
    await db.query(`ALTER TABLE "erc721_token" DROP CONSTRAINT "FK_2b5437007e048eccbeb82222357"`)
    await db.query(`ALTER TABLE "erc721_token" DROP CONSTRAINT "FK_7e22f37f2ee0280f3bf548ad981"`)
    await db.query(`ALTER TABLE "erc721_token" DROP CONSTRAINT "FK_f53d5b468ed6b40e8ad41343de3"`)
  }
}
